(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/search.53cd8267.svg"},35:function(e,t,a){},55:function(e,t,a){e.exports=a.p+"static/media/logo.ee033328.svg"},56:function(e,t,a){e.exports=a(93)},61:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(52),o=a.n(i),r=(a(61),a(35),a(11)),s=a(15),c=a(6),d=a(7),u=a(9),m=a(8),h=a(10),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,"Home")}}]),t}(n.Component),p=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,"Add")}}]),t}(n.Component),v=a(2),E=a(26),y=a.n(E),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={query:"",navigate:!1},a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.setState({query:e.target.value})}},{key:"handleSubmit",value:function(e){13===e.keyCode&&this.setState({navigate:!0})}},{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")?(document.getElementById("navProfile").style.display="flex",document.getElementById("navLogout").style.display="flex",document.getElementById("navLogin").style.display="none"):(document.getElementById("navProfile").style.display="none",document.getElementById("navLogout").style.display="none",document.getElementById("navLogin").style.display="flex")}},{key:"render",value:function(){return this.state.navigate?l.a.createElement(s.a,{to:"/search?query="+this.state.query,push:!0}):l.a.createElement("div",{id:"landing"},l.a.createElement("div",null,l.a.createElement("h1",{id:"search-title"},"Welcome"),l.a.createElement("div",{className:"search-container"},l.a.createElement("img",{alt:"Search Icon",className:"icon",src:y.a}),l.a.createElement("input",{onChange:this.handleChange,onKeyDown:this.handleSubmit,autoComplete:"off",id:"search",placeholder:"Search... (ISBN)"})),l.a.createElement("div",{id:"subtext"},"( Input the ISBN and we'll find the book for you! )")))}}]),t}(n.Component),f=a(19),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"joe",password:"",navigate:!1},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.buttonCheck=a.buttonCheck.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=this;fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})}).then((function(e){return e.json()})).then((function(t){null!=t.token?(console.log(t.token),localStorage.setItem("token",t.token),e.setState({navigate:!0})):(console.log("Login Failed"),document.getElementById("checker").style.display="block")}))}},{key:"buttonCheck",value:function(e){13===e.keyCode&&this.handleSubmit()}},{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")?(this.setState({navigate:!0}),document.getElementById("navProfile").style.display="flex",document.getElementById("navLogout").style.display="flex",document.getElementById("navLogin").style.display="none"):(document.getElementById("navProfile").style.display="none",document.getElementById("navLogout").style.display="none",document.getElementById("navLogin").style.display="flex")}},{key:"render",value:function(){return this.state.navigate?l.a.createElement(s.a,{to:"/profile",push:!0}):l.a.createElement("div",{id:"landing"},l.a.createElement("div",{id:"loginBox"},l.a.createElement("h1",{id:"loginTitle"},"Login"),l.a.createElement("div",{id:"loginBody"},l.a.createElement("div",{id:"checker"}," Check your Username & Password again"),l.a.createElement("input",{name:"username",onChange:this.handleChange,placeholder:"Username"}),l.a.createElement("input",{onKeyDown:this.buttonCheck,type:"password",name:"password",onChange:this.handleChange,placeholder:"Password"}),l.a.createElement("button",{onClick:this.handleSubmit},"Login")),l.a.createElement(r.b,{to:"register"},l.a.createElement("div",{id:"register"},"Create Account"))))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:"",email:"",first_name:"",last_name:"",navigate:!1},a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.submitData=a.submitData.bind(Object(v.a)(a)),a.buttonCheck=a.buttonCheck.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){null!=localStorage.getItem("token")?(this.setState({navigate:!0}),document.getElementById("navProfile").style.display="flex",document.getElementById("navLogout").style.display="flex",document.getElementById("navLogin").style.display="none"):(document.getElementById("navProfile").style.display="none",document.getElementById("navLogout").style.display="none",document.getElementById("navLogin").style.display="flex")}},{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"submitData",value:function(){var e=this;try{fetch("http://localhost:8000/api/user/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.state.email,password:this.state.password,first_name:this.state.first_name,last_name:this.state.last_name,username:this.state.username})}).then((function(e){return e.json()})).then((function(t){null!=t.token&&localStorage.setItem("token",t.token),null!=t.token?e.setState({navigate:!0}):e.setState({navigate:!1})}))}catch(t){console.log("Login Failed"),this.setState({navigate:!1})}}},{key:"buttonCheck",value:function(e){13===e.keyCode&&this.submitData()}},{key:"render",value:function(){return this.state.navigate?l.a.createElement(s.a,{to:"/profile",push:!0}):l.a.createElement("div",{id:"landing"},l.a.createElement("div",{id:"loginBox"},l.a.createElement("h1",{id:"loginTitle"},"Create Account"),l.a.createElement("div",{id:"loginBody"},l.a.createElement("input",{required:!0,name:"first_name",onChange:this.handleChange,placeholder:"First Name"}),l.a.createElement("input",{required:!0,name:"last_name",onChange:this.handleChange,placeholder:"Last Name"}),l.a.createElement("input",{required:!0,name:"email",onChange:this.handleChange,placeholder:"Email"}),l.a.createElement("input",{required:!0,name:"username",onChange:this.handleChange,placeholder:"Username"}),l.a.createElement("input",{onKeyDown:this.buttonCheck,required:!0,type:"password",name:"password",onChange:this.handleChange,placeholder:"Password"}),l.a.createElement("button",{onClick:this.submitData},"Create Account")),l.a.createElement(r.b,{to:"login"},l.a.createElement("div",{id:"register"},"Login"))))}}]),t}(n.Component),C=a(16),I=a.n(C),O=a(22),j=a(33),B=a.n(j),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={query:"",booklist:[]},a.handleSearch=a.handleSearch.bind(Object(v.a)(a)),a.updateState=a.updateState.bind(Object(v.a)(a)),a.formatDate=a.formatDate.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(I.a.mark((function e(){var t,a,n,l,i,o,r,s,c,d,u,m,h,g,p;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location.search,a=new URLSearchParams(t),null==(n=a.get("query"))){e.next=19;break}return l=new B.a.Client({host:"http://localhost:9200"}),e.prev=5,e.next=8,l.search({q:n});case 8:for(i=e.sent,o=[],r=0;r<i.hits.hits.length;r++)o.push(i.hits.hits[r]._source);return this.setState({booklist:o}),e.abrupt("return");case 15:e.prev=15,e.t0=e.catch(5),console.log("ERROR: SEARCH FAILED!"),console.log("DEFAULTING...");case 19:return s={VP:"Very Poor",P:"Poor",O:"Okay",G:"Good",LN:"Like New"},e.prev=20,e.next=23,fetch("http://localhost:8000/api/book/?format=json");case 23:return c=e.sent,e.next=26,c.json();case 26:d=e.sent,console.log(d),u=0;case 29:if(!(u<d.length)){e.next=51;break}return(m=new FormData).append("isbn",d[u].isbn),e.prev=32,e.next=35,fetch("http://localhost:8000/api/listingsfromisbn/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))},method:"POST",body:m});case 35:return h=e.sent,e.next=38,h.json();case 38:for(g=e.sent,p=0;p<g.length;p++)g[p].fields.condition=s[g[p].fields.condition];d[u].listings=g,e.next=47;break;case 43:e.prev=43,e.t1=e.catch(32),console.log(e.t1),console.log("ISBN SEARCH FAILURE");case 47:this.setState({booklist:d});case 48:u++,e.next=29;break;case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(20),console.log("DEFAULT SEARCH FAILURE");case 56:null!=localStorage.getItem("token")?(document.getElementById("navProfile").style.display="flex",document.getElementById("navLogout").style.display="flex",document.getElementById("navLogin").style.display="none"):(document.getElementById("navProfile").style.display="none",document.getElementById("navLogout").style.display="none",document.getElementById("navLogin").style.display="flex");case 57:case"end":return e.stop()}}),e,this,[[5,15],[20,53],[32,43]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSearch",value:function(){var e=Object(O.a)(I.a.mark((function e(t){var a,n,l,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==t.keyCode){e.next=15;break}return console.log("SEARCH QUERY:  ",this.state.query),a=new B.a.Client({host:"http://localhost:9200"}),e.prev=3,e.next=6,a.search({q:this.state.query});case 6:for(n=e.sent,l=[],i=0;i<n.hits.hits.length;i++)l.push(n.hits.hits[i]._source);this.setState({booklist:l}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("ERROR: SEARCH FAILED!");case 15:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateState",value:function(e){e.preventDefault(),this.setState({query:e.target.value}),console.log(this.state.query)}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[l,a,n].join("-")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"search-background"},l.a.createElement("div",{className:"search-container",id:"mainsearch"},l.a.createElement("img",{alt:"Search Icon",className:"icon",src:y.a}),l.a.createElement("input",{onKeyDown:this.handleSearch,onChange:this.updateState,autoComplete:"off",type:"search",id:"search",placeholder:"Search... (ISBN)"})),l.a.createElement("div",{id:"searchBody"},this.state.booklist.map((function(t){return l.a.createElement("div",{id:"bookItem",key:t.isbn},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{id:"bookTitle"},t.title),l.a.createElement("div",null,"Edition: ",l.a.createElement("span",null,t.edition)),l.a.createElement("div",null,"Author: ",l.a.createElement("span",null," ",t.author))),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{id:"right"},"ISBN:",l.a.createElement("span",null,t.isbn))),l.a.createElement("div",{className:"listingDrop"},t.listings.map((function(t){return l.a.createElement("div",{className:"listingChild",key:t.fields.added_at},l.a.createElement("div",null,l.a.createElement("span",{id:"statusNew"},t.fields.condition),l.a.createElement("div",null,"User: ",t.fields.user)),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{className:"listingRight"},"Value: $",t.fields.price,l.a.createElement("div",null,e.formatDate(t.fields.added_at))))}))))}))))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={navigate:!1,first_name:"",username:"",email:"",listings:[]},a.uploadListing=a.uploadListing.bind(Object(v.a)(a)),a.uploadBook=a.uploadBook.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.getListings=a.getListings.bind(Object(v.a)(a)),a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"getListings",value:function(){var e=this,t={VP:"Very Poor",P:"Poor",O:"Okay",G:"Good",LN:"Like New"};try{fetch("http://localhost:8000/api/listing/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))},method:"GET"}).then((function(e){return e.json()})).then((function(a){for(var n=[],l=[],i=0;i<a.length;i++)"books.listing"===a[i].model?n.push({time:a[i].fields.added_at,condition:t[a[i].fields.condition],isbn:a[i].fields.isbn,price:a[i].fields.price,author:"",title:"",edition:""}):l.push({author:a[i].fields.author,edition:a[i].fields.edition,title:a[i].fields.title,isbn:a[i].pk});for(var o=0;o<n.length;o++)for(var r=0;r<l.length;r++)n[o].isbn===l[r].isbn&&(n[o].author=l[r].author,n[o].title=l[o].title,n[o].edition=l[o].edition),o===n.length-1&&r===l.length-1&&e.setState({listings:n})}))}catch(a){console.log("FETCH FAILED")}}},{key:"componentDidMount",value:function(){var e=Object(O.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===localStorage.getItem("token")&&this.setState({navigate:!0}),e.next=3,fetch("http://localhost:8000/api/profile",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}});case 3:return t=e.sent,e.next=6,t.json();case 6:"Signature has expired."===(a=e.sent).detail&&(localStorage.clear(),this.setState({navigate:!0})),this.setState({first_name:a.first_name,email:a.email,username:a.username}),null!=localStorage.getItem("token")&&void 0!==localStorage.getItem("token")?(document.getElementById("navProfile").style.display="flex",document.getElementById("navLogout").style.display="flex",document.getElementById("navLogin").style.display="none"):(document.getElementById("navProfile").style.display="none",document.getElementById("navLogout").style.display="none",document.getElementById("navLogin").style.display="flex"),this.getListings();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadListing",value:function(e){var t=this;e.preventDefault();var a=new FormData(e.target);a.append("user",this.state.username),a.append("added_at",new Date);try{fetch("http://localhost:8000/api/listing/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))},method:"POST",body:a}).then((function(e){console.log(e),201===e.status?(document.getElementById("successWrap").style.display="block",document.getElementById("failed").style.display="none",document.getElementById("isbn").value="",document.getElementById("price").value="",t.getListings()):(document.getElementById("successWrap").style.display="none",document.getElementById("failed").style.display="block")}))}catch(n){console.log("UPLOAD FAILED")}}},{key:"uploadBook",value:function(e){e.preventDefault();var t=new FormData(e.target);try{fetch("http://localhost:8000/api/addbook",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))},method:"POST",body:t}).then((function(e){console.log(e.body),200===e.status?document.getElementById("successWrapBook").style.display="block":document.getElementById("failedBook").style.display="block"}))}catch(a){console.log("UPLOAD FAILED")}}},{key:"handleChange",value:function(e){this.setState(Object(f.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return this.state.navigate?l.a.createElement(s.a,{to:"/login",push:!0}):l.a.createElement("div",{id:"landing",className:"profileLanding"},l.a.createElement("div",{id:"profilePadder"},l.a.createElement("div",{id:"profile"},l.a.createElement("div",null,l.a.createElement("h1",{id:"profileWelcome"}," Welcome, ",l.a.createElement("span",{className:"cap"},this.state.first_name),"!"),l.a.createElement("div",{id:"email"},"( Email: ",l.a.createElement("a",{href:"mailto:"+this.state.email},this.state.email)," )")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{id:"listings"},l.a.createElement("div",null,"Your Listings:"),l.a.createElement("div",{id:"listingBody"},this.state.listings.map((function(e){return l.a.createElement("div",{id:"listItem",key:e.isbn+e.time},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("div",{id:"listingTitle"},e.title," ",l.a.createElement("span",{id:"statusNew"},e.condition)),l.a.createElement("div",null,"Author: ",l.a.createElement("span",null,e.author)),l.a.createElement("div",null,"New York, NY 10003")),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{id:"right"},"ISBN:",l.a.createElement("span",null,e.isbn),l.a.createElement("div",null,"Value: $",e.price,"                          "))))})))),l.a.createElement("div",{id:"profileBooks"},l.a.createElement("div",null,"Upload Listings:"),l.a.createElement("div",{id:"successWrap"},l.a.createElement("span",{id:"success"},"Success!")),l.a.createElement("div",{id:"failed"},"Failed..."),l.a.createElement("form",{id:"loginBody",onSubmit:this.uploadListing},l.a.createElement("input",{className:"bookInput",name:"isbn",required:!0,id:"isbn",placeholder:"isbn",onChange:this.handleChange}),l.a.createElement("select",{id:"Condition",name:"condition"},l.a.createElement("option",{value:"VP"},"Very Poor"),l.a.createElement("option",{value:"P"},"Poor"),l.a.createElement("option",{value:"O"},"Okay"),l.a.createElement("option",{value:"G"},"Good"),l.a.createElement("option",{value:"LN"},"Like New")),l.a.createElement("input",{className:"bookInput",name:"price",required:!0,id:"price",placeholder:"price",onChange:this.handleChange}),l.a.createElement("button",{type:"submit"},"Submit")),l.a.createElement("div",null,"Upload Book:"),l.a.createElement("div",{id:"successWrapBook"},l.a.createElement("span",{id:"success"},"Success!")),l.a.createElement("div",{id:"failedBook"},"Failed..."),l.a.createElement("form",{id:"loginBody",onSubmit:this.uploadBook},l.a.createElement("input",{className:"bookInput",name:"isbn",required:!0,id:"isbn",placeholder:"isbn",onChange:this.handleChange}),l.a.createElement("input",{className:"bookInput",name:"title",required:!0,id:"title",placeholder:"title",onChange:this.handleChange}),l.a.createElement("input",{className:"bookInput",name:"author",required:!0,id:"author",placeholder:"author",onChange:this.handleChange}),l.a.createElement("input",{className:"bookInput",name:"edition",required:!0,id:"edition",placeholder:"edition",onChange:this.handleChange}),l.a.createElement("button",{type:"submit"},"Submit")))))))}}]),t}(n.Component),x=a(55),N=a.n(x);var D=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(r.a,null,l.a.createElement("div",{id:"navbar"},l.a.createElement("div",null,l.a.createElement(r.b,{to:"/"},l.a.createElement("img",{id:"logo",alt:"logo",src:N.a}))),l.a.createElement(r.b,{to:"/"},l.a.createElement("h1",{id:"mainTitle"},"BOOK")),l.a.createElement("div",{id:"grower"}),l.a.createElement("div",{className:"navitem"},l.a.createElement(r.b,{to:"search"},"Search")),l.a.createElement("div",{className:"navitem",id:"navProfile"},l.a.createElement(r.b,{to:"profile"},"My Profile")),l.a.createElement("div",{className:"navitem",id:"navLogin"},l.a.createElement(r.b,{to:"login"},"Login/Register")),l.a.createElement("div",{className:"navitem",id:"navLogout"},l.a.createElement(r.b,{to:"/",onClick:function(){return localStorage.removeItem("token")}},"Logout"))),l.a.createElement("div",{id:"content"},l.a.createElement(s.b,{exact:!0,path:"/"},l.a.createElement(b,null)),l.a.createElement(s.b,{exact:!0,path:"/home"},l.a.createElement(g,null)),l.a.createElement(s.b,{exact:!0,path:"/add"},l.a.createElement(p,null)),l.a.createElement(s.b,{exact:!0,path:"/login"},l.a.createElement(k,null)),l.a.createElement(s.b,{exact:!0,path:"/register"},l.a.createElement(S,null)),l.a.createElement(s.b,{exact:!0,path:"/search"},l.a.createElement(L,null)),l.a.createElement(s.b,{exact:!0,path:"/profile"},l.a.createElement(w,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.22c7cf02.chunk.js.map